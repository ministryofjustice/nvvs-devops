---
owner_slack: "#nvvs-devops"
title: Useful Scripts
last_reviewed_on: 2025-02-25
review_in: 6 months
---

# Useful Scripts

Here is a list of some useful scripts to help with some day-to-day tasks:

| Script | Description |
| --- | --- |
| [s3_delete.sh](https://github.com/ministryofjustice/nvvs-devops/blob/main/source/documentation/team-guide/scripts/s3_delete.sh) | Use this script to delete s3 buckets that has many versions. <br />This script is needed when `Terraform` fails to delete s3 buckets because of some versions. <br />__Use AWS vault to run this script.__ <br />Example: `aws-vault exec <profile> -- s3_delete.sh bucket-name` |
| [rds_delete.sh](https://github.com/ministryofjustice/nvvs-devops/blob/main/source/documentation/team-guide/scripts/rds_delete.sh) | Use this script to delete rds instances. <br />__Use AWS vault to run this script.__ <br />Example: `aws-vault exec <profile> -- rds_delete.sh rds-instance-name` |
| [AddSecret.sh](https://github.com/ministryofjustice/nvvs-devops/blob/main/source/documentation/team-guide/scripts/AddSecret.sh) | Use this script to add secrets in AWS parameter store. <br />__Use AWS vault to run this script.__ <br />Example:<br />`aws-vault exec <profile> -- AddSecret.sh <environment> <name> <value>` |
| [AddSecureSecret.sh](https://github.com/ministryofjustice/nvvs-devops/blob/main/source/documentation/team-guide/scripts/AddSecret.sh) | Use this script to add secure secrets in AWS parameter store. <br />__Use AWS vault to run this script.__ <br />Example:<br />`aws-vault exec <profile> -- AddSecureSecret.sh <environment> <name> <value>` |
| [query_cloudwatch_log.py](https://github.com/ministryofjustice/nvvs-devops/blob/main/source/documentation/team-guide/scripts/query_cloudwatch_log.py) | Use this script to query VPC Flow Logs in Cloudwatch. <br />This is a quick script written in python that can query various fields in AWS VPC flow logs extracted from Cloudwatch. Cloudwatch doesnt support advanced querying where you will have to check src_ip against a known IP list. This scripts will allow you to load existing list of IPs from a CSV and match that against the src_ip in VPC Flow logs.<br>Steps to carry out:<br>1. Create a log export request to S3 using CloudWatch console.<br>2. Download the logs from S3 using AWS CLI.<br>3. Run the script on the log dir.<br>4. Provide path for log dir.<br>5. Provide allowed IP list path using file (CSV) path.|
| [report-for-daniel-the-manual-spaniel.sh](https:https://github.com/ministryofjustice/nvvs-devops/blob/main/report-for-daniel-the-manual-spaniel.sh) | Use this script to reviews which pages have expired or are due to expire in the next three weeks. <br />Check for dependencies (ag and datediff) and ensure they are installed.<br />Scan files for the last_reviewed_on date and the review_in period.<br />Calculate which pages are expired or will expire in the next three weeks.<br />Output lists of expiring and expired pages with their URLs.|

