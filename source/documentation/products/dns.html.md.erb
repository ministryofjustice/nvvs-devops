---
title: DNS Overview
last_reviewed_on: 2022-08-12
review_in: 3 months
---

# <%= current_page.data.title %>

`Protected domain name resolution for staff devices`

The MoJO-DNS service is a client device facing service which will be used to resolve [DNS](https://en.wikipedia.org/wiki/Domain_Name_System) queries within the MoJ local area network managed by Vodafone.

The service will provide DNS resolution requests for the following:

- A DNS resolution request from a device on the internal, wired network.
- A DNS resolution request from outside the wired network.

## User needs

Unlock access to the public internet to enable new devices for staff.

## Principles
Allow our staff access to modern devices by unlocking public internet.

Prevent access to malware, ransomware, phishing attacks, viruses, malicious sites, and spyware.  [NCSC protective DNS service](https://ncsc.gov.uk/information/pdns).

[Use cloud first](https://www.gov.uk/guidance/use-cloud-first) To meet point 5 of the [Technology Code of Practice](https://www.gov.uk/guidance/the-technology-code-of-practice) (TCoP) and the governmentâ€™s cloud first policy. 

[Infrastructure as Code](https://en.wikipedia.org/wiki/Infrastructure_as_code) provides a complete audit of changes, versioning of cloud infrastructure and DNS server application, automated testing and redeployment of the service in the event of disaster. 

## Tools

The DNS service uses [BIND ISC](https://www.isc.org/bind/) containers running on [AWS ECS Fargate](https://docs.aws.amazon.com/AmazonECS/latest/userguide/what-is-fargate.html).
We use [Terraform](https://www.terraform.io/intro) and [Infrastructure as Code](https://en.wikipedia.org/wiki/Infrastructure_as_code) to provide a complete audit of changes, versioning of components and the DNS server application, automated testing and redeployment of the service in the event of disaster. 

## Diagram
[![](https://mermaid.ink/img/pako:eNqtV2FT2zgQ_Sue9AtMLBsSKCXT6QwQyOUuhBSn5eZCp6PYcqLGlnySjJsS_vutLDlx4LjjuDIZjySv3u4-Pe2a-0bII9LoNOKEF-EcC-UMrm-ZA3_XJOWKfP0kidiJcSfGKIeh834q_A_OJf_VuYpjGlKclCvG2tHWuw5CH1Z9pohgRK2c3uje7A8TnkcGoJfwKU4s2EjA1lDZ2efR8MFEECY0XMB257YxVyqTHd-PZJTybx5WCZaSYuaBB7-gC-rLDIdE-qPxeHTT_83P8AxmrXZr_3D_4O3eoX-mnTcxi5pDogouFs0-iwWWSuShygW5bRinZVYvSdssGfMyb2tzhqcJiQwJn3mEY86Ic3MyXDn9XmCZmOY0iSibmS0VVRaghxUp8NLOAiLuwIOlBMgAXGc17t3Y9ydK4XCeEqZWJzcBghc7OzCwb8cCM0lV72Z3t86ptawRO6Nqnk-9kKd-ShkFWpY8_pZLBb79iGQJX2ofSM2KiilI5yXBmIyxELyQCCc2y3WINsLtrLej1Y5eL4GDo8ODw3dHB0d-xXPT-mpabpvgoEqqYkaf3rN5DQenE5MWBB_xtLKCnKy4zMqAY6v3U5xgFhLxZeMFQLSX87PAYoX5lEhjfoHFDGI0sOeQKBxDJS_OFKZsLTebg5lZeJDpFeoOg_3yfK67lYcIKzzF0hrrF5Wul8HHgR13rdEjrNZPxGr_BCzgrURZ51pjcXNby1d2etofdo_tOKxY_FIXmsZ84ZWQCscxiojmHkVMomgeZoj-bUl5HGrrf4X6GK39arSnYgHcCy4KLCIi5EQj_KGr12bNosQCRD_iQuFki8CaYe3CamY0RTgCHr2SOU8a2XqWT2_G77x84YNZxVpdeK8Oq664V4PUTEqKVqN8Cuk667r9Z04Ehbu7ckaAO7H9DH70jjiwssWRNqmxUxSFx0IZVgyAhLhIsaKc-VlJBxiP51Q68MOO4jxRNHPACGYJZYuKrydRdq8u92uh6enkZHwVOFCx9r1SqvBUjj4K2PVcsh9zzFSe1pCGV5fBpPv7mcN4Kj3B-b9i_HI5CsptNZR5mklvjVDibS_9IygcQjCsoQ1yqM6T8ll9VcD7rRK5dQrG8r_3P0BFJyG0mbVODZK-kZBgf3g-ngw5QIAsNjdwOxMTgbV-JAWrgllOI90w_DkvkOIIri0DPSFoN3oc0xnUF7TkuUByKRVJpbZSc4KyUpvI3i-JmGlIKJOsitg8MbTjhEP7YpPN98KgXIBvvxnor2prd5gmeEoTqpbmzpTrJEcFkQq1trLaoNYSg0UPp_gHZyXBeMpzSKWQ_qz8DHxUNn1Repdf8Q-_CjnUzb5LYo3vxDRJOm8uLo6P9_Zc2MYXpPOm3W7bMSpopOadVva9the-nFzb213bfV2opO66-q1HrfWo7W4050JTcsujdmspwtD4IN91KYBUKt4n53ZlW4MbCdh8nmyE44UvVWGTfHdA2tHbFyf5BM21KnPLqvOcs4bbSAkUHRrBfwL3GvC2AVpKoYN1YBiRGOeJ0mfxAKZ5Bv2anEdUcdHowKkRt4FzxYMlC6u5selSPBM4NYsPfwFwkxuK)](https://mermaid.live/edit#pako:eNqtV2FT2zgQ_Sue9AtMLBsSKCXT6QwQyOUuhBSn5eZCp6PYcqLGlnySjJsS_vutLDlx4LjjuDIZjySv3u4-Pe2a-0bII9LoNOKEF-EcC-UMrm-ZA3_XJOWKfP0kidiJcSfGKIeh834q_A_OJf_VuYpjGlKclCvG2tHWuw5CH1Z9pohgRK2c3uje7A8TnkcGoJfwKU4s2EjA1lDZ2efR8MFEECY0XMB257YxVyqTHd-PZJTybx5WCZaSYuaBB7-gC-rLDIdE-qPxeHTT_83P8AxmrXZr_3D_4O3eoX-mnTcxi5pDogouFs0-iwWWSuShygW5bRinZVYvSdssGfMyb2tzhqcJiQwJn3mEY86Ic3MyXDn9XmCZmOY0iSibmS0VVRaghxUp8NLOAiLuwIOlBMgAXGc17t3Y9ydK4XCeEqZWJzcBghc7OzCwb8cCM0lV72Z3t86ptawRO6Nqnk-9kKd-ShkFWpY8_pZLBb79iGQJX2ofSM2KiilI5yXBmIyxELyQCCc2y3WINsLtrLej1Y5eL4GDo8ODw3dHB0d-xXPT-mpabpvgoEqqYkaf3rN5DQenE5MWBB_xtLKCnKy4zMqAY6v3U5xgFhLxZeMFQLSX87PAYoX5lEhjfoHFDGI0sOeQKBxDJS_OFKZsLTebg5lZeJDpFeoOg_3yfK67lYcIKzzF0hrrF5Wul8HHgR13rdEjrNZPxGr_BCzgrURZ51pjcXNby1d2etofdo_tOKxY_FIXmsZ84ZWQCscxiojmHkVMomgeZoj-bUl5HGrrf4X6GK39arSnYgHcCy4KLCIi5EQj_KGr12bNosQCRD_iQuFki8CaYe3CamY0RTgCHr2SOU8a2XqWT2_G77x84YNZxVpdeK8Oq664V4PUTEqKVqN8Cuk667r9Z04Ehbu7ckaAO7H9DH70jjiwssWRNqmxUxSFx0IZVgyAhLhIsaKc-VlJBxiP51Q68MOO4jxRNHPACGYJZYuKrydRdq8u92uh6enkZHwVOFCx9r1SqvBUjj4K2PVcsh9zzFSe1pCGV5fBpPv7mcN4Kj3B-b9i_HI5CsptNZR5mklvjVDibS_9IygcQjCsoQ1yqM6T8ll9VcD7rRK5dQrG8r_3P0BFJyG0mbVODZK-kZBgf3g-ngw5QIAsNjdwOxMTgbV-JAWrgllOI90w_DkvkOIIri0DPSFoN3oc0xnUF7TkuUByKRVJpbZSc4KyUpvI3i-JmGlIKJOsitg8MbTjhEP7YpPN98KgXIBvvxnor2prd5gmeEoTqpbmzpTrJEcFkQq1trLaoNYSg0UPp_gHZyXBeMpzSKWQ_qz8DHxUNn1Repdf8Q-_CjnUzb5LYo3vxDRJOm8uLo6P9_Zc2MYXpPOm3W7bMSpopOadVva9the-nFzb213bfV2opO66-q1HrfWo7W4050JTcsujdmspwtD4IN91KYBUKt4n53ZlW4MbCdh8nmyE44UvVWGTfHdA2tHbFyf5BM21KnPLqvOcs4bbSAkUHRrBfwL3GvC2AVpKoYN1YBiRGOeJ0mfxAKZ5Bv2anEdUcdHowKkRt4FzxYMlC6u5selSPBM4NYsPfwFwkxuK)

## Repositories

| Repository | Description | 
| --- | --- |
| [DNS admin portal](https://github.com/ministryofjustice/staff-device-dns-dhcp-admin#readme) | Admin Portal for managing staff device DNS forwarders and zone configuration. |
| [DNS server](https://github.com/ministryofjustice/staff-device-dns-server#readme) | This repository contains the Dockerfile to create the BIND DNS server Docker image. The configuration for this server is managed in the Admin Portal. |
| [Shared Infrastructure CI/CD](https://github.com/ministryofjustice/staff-device-shared-services-infrastructure#readme) | This creates the shared infrastructure for the main account, named Shared Services. This account is used to host CI/CD pipelines. |
| [DNS disaster recovery](https://github.com/ministryofjustice/staff-device-dns-dhcp-disaster-recovery#readme) | This repo contains an interactive script which can be used to roll back a corrupt config file for the DNS or DHCP services. |
| [DNS performance testing](https://github.com/ministryofjustice/staff-device-logging-dns-dhcp-integration-tests#readme) | These scripts emulate UDP traffic for both DHCP and Syslog requests, contains results of previous load testing. See also video of testing [here](https://justiceuk.sharepoint.com/sites/PTTP-WaysofWorking-Tooling-MadeTechChannel/Shared%20Documents/Forms/AllItems.aspx?id=%2Fsites%2FPTTP%2DWaysofWorking%2DTooling%2DMadeTechChannel%2FShared%20Documents%2FMade%20Tech%20Channel%2FTesting%2Fkea%2Dha%2Dprod%2Dtesting%2F2021%2D02%2D09%2Dkea%2Dha%2Dprod%2Dtesting%2Emp4&parent=%2Fsites%2FPTTP%2DWaysofWorking%2DTooling%2DMadeTechChannel%2FShared%20Documents%2FMade%20Tech%20Channel%2FTesting%2Fkea%2Dha%2Dprod%2Dtesting&p=true&ga=1)  |

## Useful links

| Link | Description | 
| --- | --- |
| [DNS admin portal](https://dhcp-dns-admin.staff.service.justice.gov.uk/dns) | Admin Portal for managing staff device DNS forwarders and zone configuration. |
| [Alerts slack channel](https://mojdt.slack.com/archives/C01F6PNNHBJ) | Alerts from monitoring and alerting |
| [Monitoring dashboards](https://monitoring-alerting.staff.service.justice.gov.uk/dashboards/f/hBI4MBCnk/staff-device-dns-dhcp-infrastructure) | Grafana dashboards showing the health of the service. |
| [Transit gateway ](https://github.com/ministryofjustice/deployment-tgw) | Connects the service to wider MoJ networks as a virtual WAN |
| [NCSC Protective DNS Portal](https://www.protectivedns.service.ncsc.gov.uk/pdns) | Dashboard for Protective DNS |

