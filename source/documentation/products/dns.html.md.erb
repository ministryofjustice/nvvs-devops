---
title: DNS Overview
last_reviewed_on: 2022-08-12
review_in: 3 months
---

# <%= current_page.data.title %>

`Open and protected domain name resolution for staff devices.`

The MoJO-DNS service is a client device facing service which will be used to resolve DNS queries within the MoJ local area network managed by Vodafone. The service will automatically scale up and down to cope with varying load levels during the day.

The service will provide DNS resolution requests for the following:

- A DNS resolution request from a device on the internal, wired network.
- A DNS resolution request from outside the wired network.

## User needs

Unlock access to the public internet to enable new devices for staff.

## Principles
Allow our staff access to modern devices by unlocking public internet.

Prevent access to malware, ransomware, phishing attacks, viruses, malicious sites, and spyware.  [NCSC protective DNS service](https://ncsc.gov.uk/information/pdns).

[Infrastructure as Code](https://en.wikipedia.org/wiki/Infrastructure_as_code) provides a complete audit of changes, versioning of underlying cloud infrastructure and the DNS server application, automated testing and redeployment of the service in the event of disaster. 

## Tools

The DNS service uses [BIND ISC](https://www.isc.org/bind/) containers running on [AWS ECS Fargate](https://docs.aws.amazon.com/AmazonECS/latest/userguide/what-is-fargate.html).
We use Terraform and [Infrastructure as Code](https://en.wikipedia.org/wiki/Infrastructure_as_code) to provide a complete audit of changes, versioning of components and the DNS server application, automated testing and redeployment of the service in the event of disaster. 

## Diagram
[![](https://mermaid.ink/img/pako:eNq9Vm1PGzkQ_itW-qWI3WwvoUcbVUi8N9ccTVlapANUTWxv4saxV7aXNCX89xvHXpZAkZBOXD5E49nxM-_P7k2LasZbvVYh9ZxOwDgyOL1Ul4rgL_x_LgpB-fevlpvXBfQKSCsUyYeRyXbI3_qvYCBABlUwJ18bm30YSc42SJruLIeVKSUPqiUZ7J6k-Vw4OrkJyKNKSCbUONwcaFqjkl3DIYrkhLu5NtN4DAC3ddBUCjolu-d5enZ8Ti5bE-dK28uysXCTatSmepbNhBLWmYUuflTWYbQZ46XUixlXLnXj-WUrQDXh-djJkvSH0edHLktult80g_R89-R1LAwYo-c2BemCnX9eaMXDCQ2DsLER8Feg_eO8rpNWilMnroVbePVTqH3luFE8no7B8TksSM7NtS_8modQDO-iKQSzbKZ_tMFJsFaAaiNUNhdTkdkSKLfZ8OxseN7_lJUwxlNna_vt1tt321vbWe14M_rcjD430UFdM-_LN_rb8ORBWlotsSMXIScDiulZ3dvznJyhxor1nK4CpO9jgNyvLzgHdOLbtfSNPhnsPQW7NioDDSxIeyBBUW6ihwjivRzu5xGLViNug_kRmDGGFGAPsW44NE12DoS6G_a1NkR4XJLP6cHH_eEfq5afHtQuGDgYgY3W_kG9Vov8yyDKB-tGoVCYOpEctfahj87_4KP7cj6w_ivwpmb32tGQTngWz_18P_10uBtPtO7I1f0d8LjPJAProChSxn0fU6Zsyia0TIUqDDbeVNRVhtfj_ijczvPDfSLeR5Dd_wT5mxFMd_IuUi2dcneRd8neSqq75EFz4TjBVSI51WW9BOSYIyKuASOFwSUbauNA_m78XhK_-zL4YUiC6j5X-s77EQCGc9JeTUbbhhVvx3lpj_V1u5pmaOanIuABErbUSEbqwtNQCGCwUpBTPkYyrEnqGoSEkZBI-uSfu3cFr9I5ty7trMXXoN6LEZVtmMEvrVbzDCNduRSV2VjqEcgHg5uZlXf7HX5l9RBT_yY44IXHJ4WQsvfq6Oj9-zdvErymp7z3qtvtRjmdC-YmvU75895dT9FJJNEE5zdpxq0RO43YTY60mYNh3NgE2SIZVEjmSZNectdgH1PwxH_6tw8mFOtvLw6jpqbeqiyl4CauCCh8f7E1Vr56kO8jyJRqqSsTi_Bui3fZn88uwiO0pPmASOpPhSd9tpLWjJsZCIZfYzce97LlJnyGVNNDkfECKul8y27RtCqRc_khE06bVg-by5MWVE7nC0Xrc7A5EDA2MAvK238BZAQ7PA)](https://mermaid-js.github.io/mermaid-live-editor/edit#pako:eNq9Vm1PGzkQ_itW-qWI3WwvoUcbVUi8N9ccTVlapANUTWxv4saxV7aXNCX89xvHXpZAkZBOXD5E49nxM-_P7k2LasZbvVYh9ZxOwDgyOL1Ul4rgL_x_LgpB-fevlpvXBfQKSCsUyYeRyXbI3_qvYCBABlUwJ18bm30YSc42SJruLIeVKSUPqiUZ7J6k-Vw4OrkJyKNKSCbUONwcaFqjkl3DIYrkhLu5NtN4DAC3ddBUCjolu-d5enZ8Ti5bE-dK28uysXCTatSmepbNhBLWmYUuflTWYbQZ46XUixlXLnXj-WUrQDXh-djJkvSH0edHLktult80g_R89-R1LAwYo-c2BemCnX9eaMXDCQ2DsLER8Feg_eO8rpNWilMnroVbePVTqH3luFE8no7B8TksSM7NtS_8modQDO-iKQSzbKZ_tMFJsFaAaiNUNhdTkdkSKLfZ8OxseN7_lJUwxlNna_vt1tt321vbWe14M_rcjD430UFdM-_LN_rb8ORBWlotsSMXIScDiulZ3dvznJyhxor1nK4CpO9jgNyvLzgHdOLbtfSNPhnsPQW7NioDDSxIeyBBUW6ihwjivRzu5xGLViNug_kRmDGGFGAPsW44NE12DoS6G_a1NkR4XJLP6cHH_eEfq5afHtQuGDgYgY3W_kG9Vov8yyDKB-tGoVCYOpEctfahj87_4KP7cj6w_ivwpmb32tGQTngWz_18P_10uBtPtO7I1f0d8LjPJAProChSxn0fU6Zsyia0TIUqDDbeVNRVhtfj_ijczvPDfSLeR5Dd_wT5mxFMd_IuUi2dcneRd8neSqq75EFz4TjBVSI51WW9BOSYIyKuASOFwSUbauNA_m78XhK_-zL4YUiC6j5X-s77EQCGc9JeTUbbhhVvx3lpj_V1u5pmaOanIuABErbUSEbqwtNQCGCwUpBTPkYyrEnqGoSEkZBI-uSfu3cFr9I5ty7trMXXoN6LEZVtmMEvrVbzDCNduRSV2VjqEcgHg5uZlXf7HX5l9RBT_yY44IXHJ4WQsvfq6Oj9-zdvErymp7z3qtvtRjmdC-YmvU75895dT9FJJNEE5zdpxq0RO43YTY60mYNh3NgE2SIZVEjmSZNectdgH1PwxH_6tw8mFOtvLw6jpqbeqiyl4CauCCh8f7E1Vr56kO8jyJRqqSsTi_Bui3fZn88uwiO0pPmASOpPhSd9tpLWjJsZCIZfYzce97LlJnyGVNNDkfECKul8y27RtCqRc_khE06bVg-by5MWVE7nC0Xrc7A5EDA2MAvK238BZAQ7PA)

## Repositories

| Repository | Description | 
| --- | --- |
| [DNS admin portal](https://github.com/ministryofjustice/staff-device-dns-dhcp-admin#readme) | Admin Portal for managing staff device DNS forwarders and zone configuration. |
| [DNS server](https://github.com/ministryofjustice/staff-device-dhcp-server#readme) | This repository contains the Dockerfile to create the BIND DNS server Docker image. The configuration for this server is managed in the Admin Portal. |
| [DNS Infrastructure CI/CD](https://github.com/ministryofjustice/staff-device-shared-services-infrastructure#readme) | This creates the shared infrastructure for the main account, named Shared Services. This account is used to host CI/CD pipelines. |
| [DNS disaster recovery](https://github.com/ministryofjustice/staff-device-dns-dhcp-disaster-recovery#readme) | This repo contains an interactive script which can be used to roll back a corrupt config file for the DNS or DHCP services. |
| [DNS performance testing](https://github.com/ministryofjustice/staff-device-logging-dns-dhcp-integration-tests#readme) | These scripts emulate UDP traffic for both DHCP and Syslog requests, contains results of previous load testing. See also video of testing [here](https://justiceuk.sharepoint.com/sites/PTTP-WaysofWorking-Tooling-MadeTechChannel/Shared%20Documents/Forms/AllItems.aspx?id=%2Fsites%2FPTTP%2DWaysofWorking%2DTooling%2DMadeTechChannel%2FShared%20Documents%2FMade%20Tech%20Channel%2FTesting%2Fkea%2Dha%2Dprod%2Dtesting%2F2021%2D02%2D09%2Dkea%2Dha%2Dprod%2Dtesting%2Emp4&parent=%2Fsites%2FPTTP%2DWaysofWorking%2DTooling%2DMadeTechChannel%2FShared%20Documents%2FMade%20Tech%20Channel%2FTesting%2Fkea%2Dha%2Dprod%2Dtesting&p=true&ga=1)  |

## Useful links

| Link | Description | 
| --- | --- |
| [DNS admin portal](https://dhcp-dns-admin.staff.service.justice.gov.uk/dns) | Admin Portal for managing staff device DNS forwarders and zone configuration. |
| [Alerts channel](https://mojdt.slack.com/archives/C01F6PNNHBJ) | Alerts from monitoring and alerting |
| [Monitoring dashboards](https://monitoring-alerting.staff.service.justice.gov.uk/dashboards/f/hBI4MBCnk/staff-device-dns-dhcp-infrastructure) | Grafana dashboards showing the health of the service. |
| [Transit gateway ](https://github.com/ministryofjustice/deployment-tgw) | Connects the service to wider MoJ networks as a virtual WAN |
| [NCSC Protective DNS Portal](https://www.protectivedns.service.ncsc.gov.uk/pdns) | Dashboard for Protective DNS |

