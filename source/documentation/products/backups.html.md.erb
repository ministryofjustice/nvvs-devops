---
owner_slack: "#nvvs-devops"
title: Backups
last_reviewed_on: 2022-09-09
review_in: 6 months
---

# <%= current_page.data.title %>

We use [AWS RDS Backup and Restore](https://aws.amazon.com/rds/features/backup/) to automatically back up production databases across our products.

## Amazon RDS Automated backups

Product | Type of backup | Retention
---|---|---|
DHCP/DNS Admin Portal | RDS (MySQL) | 30 Days
DHCP KEA | RDS (MySQL) | 30 Days |
IMA | RDS (Postgres) | 7 Days | 
NACS Admin | RDS (MySQL) | 30 Days | 

## Backup configuration 

The backup retention is defined as code in the following locations.

Product | variable | database setting
---|---|---|
DHCP/DNS Admin Portal | https://github.com/ministryofjustice/staff-device-dns-dhcp-infrastructure/blob/main/variables.tf#L52) | https://github.com/ministryofjustice/staff-device-dns-dhcp-infrastructure/blob/main/modules/admin/db.tf#L18 |
DHCP KEA | https://github.com/ministryofjustice/staff-device-dns-dhcp-infrastructure/blob/main/variables.tf | https://github.com/ministryofjustice/staff-device-dns-dhcp-infrastructure/blob/main/modules/dhcp/mysql.tf#L10 |
NACS Admin |  https://github.com/ministryofjustice/network-access-control-infrastructure/blob/main/variables.tf#L48 | https://github.com/ministryofjustice/network-access-control-infrastructure/blob/main/modules/admin/db.tf#L15 | 

