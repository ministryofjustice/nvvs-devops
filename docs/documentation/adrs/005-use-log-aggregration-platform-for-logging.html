<!doctype html>
<html lang="en" class="govuk-template no-js">
  <head>
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

    <title>005 - Use Log Aggregation Platform - NVVS DevOps</title>

    <link href="../../stylesheets/manifest.css" rel="stylesheet" />

    <link rel="canonical" href="https://ministryofjustice.github.io/nvvs-devops/documentation/adrs/005-use-log-aggregration-platform-for-logging.html">

      <meta name="robots" content="noindex" />
      <meta name="twitter:card" content="summary" />
      <meta name="twitter:domain" content="ministryofjustice.github.io" />
      <meta name="twitter:image" content="https://ministryofjustice.github.io/nvvs-devops/images/govuk-large.png" />
      <meta name="twitter:title" content="005 - Use Log Aggregation Platform - NVVS DevOps" />
      <meta name="twitter:url" content="https://ministryofjustice.github.io/nvvs-devops/documentation/adrs/005-use-log-aggregration-platform-for-logging.html" />

      <meta property="og:image" content="https://ministryofjustice.github.io/nvvs-devops/images/govuk-large.png" />
      <meta property="og:site_name" content="NVVS DevOps" />
      <meta property="og:title" content="005 - Use Log Aggregation Platform" />
      <meta property="og:type" content="object" />
      <meta property="og:url" content="https://ministryofjustice.github.io/nvvs-devops/documentation/adrs/005-use-log-aggregration-platform-for-logging.html" />

    
  </head>

  <body class="govuk-template__body">
    <script>document.body.className = ((document.body.className) ? document.body.className + ' js-enabled' : 'js-enabled');</script>

    <div class="app-pane">
      <div class="app-pane__header toc-open-disabled">
        <a href="#content" class="govuk-skip-link">Skip to main content</a>

        <header class="govuk-header app-header" role="banner" data-module="govuk-header">
  <div class="govuk-header__container govuk-header__container--full-width">
    <div class="govuk-header__logo">
      <a href="/" class="govuk-header__link govuk-header__link--homepage">
        <span class="govuk-header__product-name">
          NVVS DevOps
        </span>
      </a>
        <strong class="govuk-tag">Beta</strong>
    </div>
    <div class="govuk-header__content">
      <button type="button" class="govuk-header__menu-button govuk-js-header-toggle" aria-controls="navigation" aria-label="Show or hide Top Level Navigation">Menu</button>
      <nav>
        <ul id="navigation" class="govuk-header__navigation govuk-header__navigation--end" aria-label="Top Level Navigation">
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="https://ministryofjustice.github.io/nvvs-devops">Home</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="https://github.com/ministryofjustice/nvvs-devops">GitHub</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="https://mojdt.slack.com/archives/C026AFE617T">Slack</a>
            </li>
        </ul>
      </nav>
    </div>
  </div>
</header>

      </div>

        <div id="toc-heading" class="toc-show fixedsticky">
          <a href="#toc" class="toc-show__label js-toc-show" aria-controls="toc">
            Table of contents <span class="toc-show__icon"></span>
          </a>
        </div>

      <div class="app-pane__body" data-module="in-page-navigation">
          <div class="app-pane__toc">
            <div class="toc" data-module="table-of-contents">
              <div class="search" data-module="search">
  <form action="https://www.google.co.uk/search" method="get" role="search">
    <input type="hidden" name="as_sitesearch" value="https://ministryofjustice.github.io/nvvs-devops"/>
    <label class="govuk-label search__label" for="search">
      Search (via Google)
    </label>
    <input class="govuk-input govuk-!-margin-bottom-4" id="search" name="q" type="text" aria-controls="search-results" placeholder="Search">
  </form>
  <div id="search-results" class="search-results" aria-hidden="true" role="dialog" aria-labelledby="search-results-title">
    <div class="search-results__inner">
      <button class="search-results__close">Close<span class="search-results__close-label"> search results</span></button>
      <h2 id="search-results-title" class="search-results__title" aria-live="polite">Results</h2>
      <div class="search-results__content"></div>
    </div>
  </div>
</div>

              <a href="#" class="toc__close js-toc-close" aria-controls="toc" aria-label="Hide table of contents"></a>
              <nav id="toc" class="js-toc-list toc__list" aria-labelledby="toc-heading">
                      <ul>
  <li>
    <a href="#005-use-log-aggregation-platform"><span>005 - Use Log Aggregation Platform</span></a>
    <ul>
      <li>
        <a href="#status"><span>Status</span></a>
      </li>
      <li>
        <a href="#context"><span>Context</span></a>
        <ul>
          <li>
            <a href="#logging-requirements-for-early-beta"><span>Logging requirements for early beta</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="#decision"><span>Decision</span></a>
      </li>
      <li>
        <a href="#consequences"><span>Consequences</span></a>
        <ul>
          <li>
            <a href="#advantages"><span>Advantages</span></a>
          </li>
          <li>
            <a href="#disadvantages"><span>Disadvantages</span></a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>


              </nav>
            </div>
          </div>

        <div class="app-pane__content toc-open-disabled">
          <main id="content" class="technical-documentation" data-module="anchored-headings">
            <h1 id="005-use-log-aggregation-platform">005 - Use Log Aggregation Platform</h1><p>Date: 2020-05-17</p>
<h2 id="status">Status</h2><p>✅ Accepted</p>
<h2 id="context">Context</h2><p>The <a href="https://ministry-of-justice-acronyms.service.justice.gov.uk/#:~:text=Info-,PTTP,-Prison%20Technology%20Transformation">PTTP</a> programme requires that security logging is enabled to support the early stages of deployment. At this time the MoJ <a href="https://ministry-of-justice-acronyms.service.justice.gov.uk/#:~:text=Info-,OST,-Operational%20Security%20Team">Operational Security Team</a> (OST), does not have the immediate capacity to consume and process logs generated by the new devices and services being provisioned. We need an approach to aggregating logs for both traffic flow (Palo Alto) and the DNS/DHCP service for <a href="https://ministry-of-justice-acronyms.service.justice.gov.uk/#:~:text=Info-,PTTP,-Prison%20Technology%20Transformation">PTTP</a> and to eventually stream or provide access to these logs for collection by OST.</p>
<h3 id="logging-requirements-for-early-beta">Logging requirements for early beta</h3><p>Areas of security logging capabilities</p>

<ul>
<li>Cloud</li>
<li>Network appliances</li>
</ul>
<p>Below is a list of the logs that maybe generated and delivered for each element.</p>
<h4 id="cloud">Cloud</h4>
<ul>
<li>IP connections (source and destination address)</li>
<li>Security group flow logs (i.e. security group ingress/egress traffic logging)</li>
<li>Login Success and failures</li>
<li>Multi-factor authentication success and failures</li>
<li>Logout events</li>
<li>Group/role creation, modification or deletion</li>
<li>Group role membership changes (addition/subtraction)</li>
<li>Group role elevation (e.g. temporary assumed elevated privilege for finite time)</li>
<li>Control-plane event logs (logging events generated by operations undertaken within
the environment)</li>
<li>OS security event logs (e.g. Windows VM event logs, Linux VM Syslog)</li>
<li>CloudWatch logs (AWS)</li>
<li>CloudTrail (AWS)
#### Network appliances</li>
<li>IP connections (source and destination address)</li>
<li>Login Success and failure events</li>
<li>Multi-factor authentication success and failures</li>
<li>Logout events</li>
<li>Power/service on/off</li>
<li>Creation/registration and deletion/deregistration</li>
<li>Software update events/status</li>
<li>IP allocation/deallocation</li>
<li>Firewall/routing rule creation, modification or deletion</li>
<li>Network change events (e.g. additional or removal of virtual networks or interfaces)</li>
<li>Successful/unsuccessful inbound service daemon connections</li>
<li>Unsuccessful outbound connections where the network traffic is not associated to an
inbound request</li>
<li>Successful and unsuccessful DNS queries</li>
<li>Infrastructure node/end-user device registration/de-registration (as applicable based
on device type)</li>
<li>IP address allocation/deallocation</li>
<li>DHCP IP address request, IP address allocation, IP address lease duration, and IP
address leased</li>
<li>Unsuccessful client EUD IP address allocation, including requesting MAC address and the DHCP scope identifier</li>
</ul>
<h4 id="the-following-should-not-be-included-in-log-files">The following should not be included in log files:</h4>
<ul>
<li>Secrets (e.g. passwords or session keys)</li>
<li>Payment card details (e.g. related to PCI-DSS)</li>
</ul>
<h2 id="decision">Decision</h2><p>We will store all logs in S3 buckets for later ingestion by the <a href="https://ministry-of-justice-acronyms.service.justice.gov.uk/#:~:text=Info-,OST,-Operational%20Security%20Team">Operational Security Team</a> logging platform.</p>
<p><strong>Update 2020-06-17</strong>
The Operational Security Logging Platform is ready to accept these logs and the decision was made to ship logs rather than store.</p>
<h2 id="consequences">Consequences</h2><h3 id="advantages">Advantages</h3>
<ul>
<li>We don&rsquo;t need to stand up our own logging infrastructure</li>
<li>Availability of logs from different sources in one location.</li>
</ul>
<h3 id="disadvantages">Disadvantages</h3>
<ul>
<li>Reliant on another team which means we may need to wait sometime before we get an aggregated view of our logs.</li>
</ul>

              <div data-module='page-expiry' data-last-reviewed-on="2024-04-20">
    <div class='page-expiry--not-expired'>
      This page was last reviewed on 20 October 2023.

        It needs to be reviewed again on 20 April 2024
        by the page owner <a href="">#nvvs-devops</a>
        .
    </div>

    <div class='page-expiry--expired'>
      This page was set to be reviewed before 20 April 2024
       by the page owner <a href="">#nvvs-devops</a>.
      This might mean the content is out of date.
    </div>
  </div>

          </main>

          <aside>
              <ul class="contribution-banner">
                <li><a href="https://github.com/ministryofjustice/nvvs-devops/blob/main/source/documentation/adrs/005-use-log-aggregration-platform-for-logging.html.md.erb">View source</a></li>
                <li><a href="https://github.com/ministryofjustice/nvvs-devops/issues/new?labels=bug&amp;title=Re:%20'005%20-%20Use%20Log%20Aggregation%20Platform'&amp;body=Problem%20with%20'005%20-%20Use%20Log%20Aggregation%20Platform'%20(https://ministryofjustice.github.io/nvvs-devops/documentation/adrs/005-use-log-aggregration-platform-for-logging.html)">Report problem</a></li>
                <li><a href="https://github.com/ministryofjustice/nvvs-devops">GitHub Repo</a></li>
              </ul>
          </aside>

          <footer class="govuk-footer app-footer" role="contentinfo">
  <div class="govuk-footer__meta">
    <div class="govuk-footer__meta-item govuk-footer__meta-item--grow">


      <svg
        aria-hidden="true"
        focusable="false"
        class="govuk-footer__licence-logo"
        xmlns="http://www.w3.org/2000/svg"
        viewbox="0 0 483.2 195.7"
        height="17"
        width="41"
      >
        <path
          fill="currentColor"
          d="M421.5 142.8V.1l-50.7 32.3v161.1h112.4v-50.7zm-122.3-9.6A47.12 47.12 0 0 1 221 97.8c0-26 21.1-47.1 47.1-47.1 16.7 0 31.4 8.7 39.7 21.8l42.7-27.2A97.63 97.63 0 0 0 268.1 0c-36.5 0-68.3 20.1-85.1 49.7A98 98 0 0 0 97.8 0C43.9 0 0 43.9 0 97.8s43.9 97.8 97.8 97.8c36.5 0 68.3-20.1 85.1-49.7a97.76 97.76 0 0 0 149.6 25.4l19.4 22.2h3v-87.8h-80l24.3 27.5zM97.8 145c-26 0-47.1-21.1-47.1-47.1s21.1-47.1 47.1-47.1 47.2 21 47.2 47S123.8 145 97.8 145"
        />
      </svg>
      <span class="govuk-footer__licence-description">
        All content is available under the
        <a
          class="govuk-footer__link"
          href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/"
          rel="license"
        >Open Government Licence v3.0</a>, except where otherwise stated
      </span>
    </div>
    <div class="govuk-footer__meta-item">
      <a
        class="govuk-footer__link govuk-footer__copyright-logo"
        href="https://www.nationalarchives.gov.uk/information-management/re-using-public-sector-information/uk-government-licensing-framework/crown-copyright/"
      >© Crown copyright</a>
    </div>
  </div>
</footer>

        </div>
      </div>
    </div>

    
    <script src="../../javascripts/application.js"></script>
  </body>
</html>
